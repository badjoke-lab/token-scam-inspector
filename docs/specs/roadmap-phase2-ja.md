# Token Scam Inspector

## 開発ロードマップ（Stage制 / Product Phase分離版）— Product Phase 2

---

## 用語定義（最初に固定）

### ■ Product Phase（プロダクト段階）

* **Product Phase 1**：MVP（無料・最小）※完了済み
* **Product Phase 2**：無料拡張（“分析として価値が出る”状態にする）
* **Product Phase 3**：有料前提の高度化（深い解析・履歴・監視）

👉 これは「プロダクトの成長段階」

---

### ■ Development Stage（開発ステージ）

* **Stage 8〜**：Product Phase 2 の実装ステップ
* 各 Stage は **単独で完結・停止可能**
* 原則：**無料運営のまま成立**（DB前提/高頻度追跡/巨大データは避ける）

👉 これは「作業の順番」

---

## Product Phase 2 の狙い（Phase 2 で “価値が出る” 条件）

Phase 2 の完了条件は、単に項目が増えることではなく次の4点を満たすこと：

1) **Evidence が “URL + 事実（値）” で追跡できる**  
   - “Found pattern” だけで high を出さない（誤爆防止）
2) **high の乱発を止める**（ルール締め・根拠要件の強化）
3) **rate limit / upstream 障害でも止まらない**（stale 返却 + 状態表示）
4) **広い範囲で破綻してないことを担保する**（検証セット＋スモーク）

---

## Development Stage 一覧（8–13）

---

## Stage 8：検証セット（Regression）を固定（少数例禁止）

### 🎯 ゴール

「特定の数件だけ動く」を排除し、**広く外してない**を毎回確認できるようにする。

### 作業内容

* チェーン別に **検証用アドレスセット**を `docs/specs/` または `docs/references/` に固定（例：各チェーン 50〜200 件）
  * 安全寄り（bluechip）
  * ランダム
  * 危険サンプル（既知 or ユーザー提供）
* 最低限の **スモーク手順** を docs に明文化（手動でもOK）
* 可能なら自動化（将来CI化できる形を維持）

### 完了条件

* 「このセットを回して崩れてない」を毎回確認できる
* “3銘柄だけ”のような検証はしない（無価値）

---

## Stage 9：Evidence を “URL＋事実（値）” 形式へ統一（分析の核）

### 🎯 ゴール

ユーザーが根拠を追える＝**分析として成立**する状態にする。

### 作業内容

* checks の evidence を **構造化**（文字列羅列から脱却）
  * 最低限：`sourceUrl` / `fact` / `value` / `notes`（相当の情報を必ず含める）
* UI で evidence をリンクとして表示し、コピペ可能にする
* 取得不能時も evidence を必ず出す
  * 例：`rate_limited` / `missing_api_key` / `timeout` を “人間の言葉”にする

### 完了条件

* 各チェックが「どこを見てそう判断したか」を提示できる
* unknown でも「なぜ分からないか」が読める

---

## Stage 10：判定ルールの締め（high乱発・誤爆の停止）

### 🎯 ゴール

「単語ヒットで high」みたいな **無価値な誤爆**を止める。

### 作業内容

* high を返す条件を再定義：
  * **強い根拠（確認可能な事実）があるときのみ high**
  * それ以外は warn/unknown に落とす
* “パターン検出” は evidence に残してもよいが、**単体で high にしない**
* overallRisk も同様に「根拠があるときだけ上げる」方針へ

### 完了条件

* bluechip / 有名トークンが理由なしに high にならない
* high のときは必ず根拠URLや確認可能な事実が提示される

---

## Stage 11：耐障害性（rate limit / upstream失敗でも止めない）

### 🎯 ゴール

無料枠・外部API制限でも **サイトが“使える状態”を維持**する。

### 作業内容

* upstream が rate limit / timeout のとき：
  * **stale キャッシュ返却**（あれば返す）
  * `meta` に `fresh|stale` と `upstream_status` を入れる
* UI に「今回は古い結果（stale）」を明示
* “stale が無い場合”の表示も初心者向けに統一（次に何をすれば良いか）

### 完了条件

* BSC 等で rate limit が起きても「無価値な空表示」で終わらない
* 少なくとも止まらず、状態が説明される

---

## Stage 12：共有導線の固定（Shareable / SEO）

### 🎯 ゴール

貼れる・残る・検索される。**使われる導線**を作る。

### 作業内容

* 共有URLを安定化（例：`/inspect/{chain}/{address}`）
  * 直リンクでページが開き、同じ結果が見られる（キャッシュ前提）
* “危険サイン辞書”ページを用意（SEO/教育）
  * 用語の解説、なぜ危険か、どう確認するか
* UI 上に「共有リンク」ボタン（コピー）

### 完了条件

* 結果ページをURLで共有できる
* 辞書ページが引用できる（説明が資産になる）

---

## Stage 13：初心者UXの固定（読む順番・文章・入力支援）

### 🎯 ゴール

初心者が「何を見ればいいか」迷わない **読む順番**を確定する。

### 作業内容

* 表示順を固定：
  1) 要点（topReasons）
  2) チェック一覧（short）
  3) 詳細（detail + evidence + howToVerify）
* 入力支援：
  * 例入力（サンプル）
  * エラー文を人間語に（形式/必須/対応チェーン）
* 注意書き（断定しない/unknownの意味/投資助言ではない）を常設

### 完了条件

* JSONを読む必要がなくなる（画面だけで理解できる）
* 初見ユーザーが試しやすい（エラー離脱を減らす）

---

## Product Phase 2 完了後のサイト挙動（まとめ）

* ユーザーが chain/address を入力 → 検査
* 結果は **根拠URL＋事実（値）** で表示され、追跡できる
* high は乱発せず、根拠があるときだけ出る
* rate limit 等でも stale を返し、状態が説明される
* 結果ページを URL で共有できる
* 辞書ページで危険サインの意味を理解できる

---

## Product Phase 3（将来）：有料前提の進化（予告）

* 深いデータ（ホルダー/取引/クラスター等）の追加
* 変化履歴・監視通知（コスト前提）
* provider 差し替え（高精度データ導入）

---

## Codex投入単位（最重要 / Phase 2）

❌ Stage 8〜13 を全部まとめて投入しない  
⭕ 1 Stage = 1 PR（止めやすく、事故りにくい）

推奨順：
1) Stage 9（Evidence統一）
2) Stage 10（誤爆停止）
3) Stage 11（耐障害）
4) Stage 12（共有/SEO）
5) Stage 13（初心者UX）
6) Stage 8（検証セット増強）※並行でも可
