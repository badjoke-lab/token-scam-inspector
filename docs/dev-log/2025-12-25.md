もう少しツールについて突っ込んで聞いてみることにします
まずはツールの挙動について

何か勝手に既存との差別化まで考えてくれました
たまには気が利きますね

https://imgur.com/a/Idk8ngd

---GPT---

了解。

ここでは **「画面を触ったときに何が起きるか」** が頭に浮かぶレベルまで、

**Token Scam Inspector の挙動**を具体的に書く。

あわせて **想定ユースケース**も整理する。

---

# Token Scam Inspector｜ツール挙動 詳細仕様（概念）

## 1️⃣ 全体フロー（ユーザー視点）

### ① 初期画面（Landing / Tool画面）

ユーザーが最初に見るのは、**極端にシンプルな画面**。

- チェーン選択（Dropdown）
    - Ethereum / BSC / Polygon（MVPでは2〜3チェーンまで）
- トークンコントラクト入力欄
    - `0x...`
- [ Inspect Token ] ボタン

補足テキスト（重要）：

> This tool does NOT determine whether a token is a scam.
> 
> 
> It highlights **common risk signals** found in scam tokens.
> 

---

### ② 実行中状態（Inspection Phase）

ボタン押下後、即座に以下の状態に遷移：

- 入力欄はロック
- ステータス表示が段階的に進む
- **ユーザーに「何を調べているか」を見せる**

例：

```
[✓] Fetching contract metadata
[✓] Checking owner privileges
[✓] Checking supply control (mint/burn)
[✓] Checking trading restrictions
[✓] Analyzing holder concentration
[✓] Building risk summary

```

※ この「段階表示」は **CryptoFeeScope の UI 資産をそのまま転用できる**

---

### ③ 結果表示（Result View）

### A. 総合判定（最上部）

- 🟢 Low Risk
- 🟡 Medium Risk
- 🔴 High Risk

＋ 短い一文要約：

> High Risk
> 
> 
> This token shows multiple risk signals commonly found in scam tokens.
> 

---

### B. チェック項目別の結果一覧（中核）

表形式 or カード形式：

| Check Item | Result | Why it matters |
| --- | --- | --- |
| Owner privileges | ⚠️ Warning | Owner can modify trading rules |
| Mint capability | ❌ High Risk | Token supply can be increased |
| Trading restrictions | ❌ High Risk | Potential sell restriction detected |
| Holder concentration | ⚠️ Warning | Top holders control 78% of supply |

**重要**

- ❌ / ⚠️ / ✅ の理由は **必ず文章で書く**
- 数字は「判断材料」であり、結論ではない

---

### C. 解説セクション（Explain）

ここが **既存ツールとの差別化の核心**。

例：

> Why trading restrictions are dangerous
> 
> 
> Tokens that restrict selling often allow buying but prevent users from exiting,
> 
> a common scam pattern known as a "honeypot".
> 

→ 初心者でも「なるほど」と分かる説明。

---

### D. 注意書き（必須）

下部に固定で表示：

> ⚠️ Disclaimer
> 
> 
> This tool does not provide investment advice.
> 
> Results are based on publicly observable contract patterns and may be inaccurate.
> 

---

## 2️⃣ 内部挙動（ロジックの流れ）

※ 実装詳細ではなく「どういう思想で動くか」

### ステップ1：データ取得

- ブロックエクスプローラ API から：
    - コントラクト情報
    - ABI（取得可能な場合）
    - トークン供給
    - ホルダー上位情報

### ステップ2：ルールベース評価

- Yes / No / Unknown の三値判定
- **Unknown は必ず Warning 扱い**
- 判定できない＝安全、にはしない

### ステップ3：重み付け

- 単一 Fail → Medium
- 致命項目 Fail（例：売却制限） → High
- Fail + Warning 複数 → High

※ スコア計算は**隠さない**

→ どの項目が High を引き起こしたかを明示

---

## 3️⃣ 想定ユースケース（実用ベース）

### ユースケース①：Xで見かけたミームコイン

- 「This will 100x」
- コントラクトが貼られている

行動：

1. アドレスをコピペ
2. Inspectorに貼る
3. 🔴 High Risk → **スルー**

---

### ユースケース②：DEXで今からスワップ

- 流動性はある
- でも不安

行動：

1. スワップ前にチェック
2. 売却制限 Fail → **買わない**

---

### ユースケース③：すでに買ってしまった

- 価格が怪しい
- 売れるか分からない

行動：

1. Inspectorで確認
2. 「Owner can change trading rules」→ **即撤退判断**

---

### ユースケース④：初心者の学習用

- 「なぜこのトークンは危険なのか分からない」

行動：

1. 結果と解説を読む
2. 危険パターンを理解
3. 次回から自己判断が速くなる

---

### ユースケース⑤：他ツールへの入口

- Scam Inspector → Fee / Bridge / NFT系ツールへ内部リンク
- **ハブとして機能**

---

## 4️⃣ この挙動設計のポイント（重要）

- **速い（30秒以内）**
- **断定しない**
- **説明する**
- **壊れても致命傷にならない**
- **無料で成立する**

---

## まとめ（判断材料）

- この挙動なら **Codex自動生成に向いている**
- ロジックが多少ズレても「説明ツール」として成立
- 競合と正面衝突せず、**理解補助という別レイヤー**に立てる

---

次に進むなら：

- **A：MVPで固定するチェック項目（10個以内）**
- **B：Low / Medium / High 判定条件の明文化**
- **C：Codex用タスク文（触っていい範囲を厳密指定）**

どれから固める？

---GPT---


「TSIは怪しいトークンを判定するツールだけど実際どうやって判定するの？」
の回答です



---GPT---

了解。

ここでは **「何を・どう測って・どう判定するか」** を、

**MVPで現実的／Codex自動生成可能／無料運営前提**の範囲に絞って整理する。

ポイントは一貫してこれ：

> ❌ 正確に詐欺を断定しない
> 
> 
> ⭕ 詐欺トークンで“よく一緒に出る危険な特徴”を機械的に列挙する
> 

---

# Token Scam Inspector

## 判定項目・測定方法（MVP確定候補）

## 全体構造（先に結論）

- 判定は **ルールベース**
- 各項目は
    
    **OK / Warning / High Risk / Unknown**
    
- 「Unknown（取得不能）」は **安全扱いしない**
- **致命項目が1つでもあれば High Risk**

---

## ① 取引制限・ハニーポット兆候（最重要）

### 何を見るか

- 売却を妨害できる構造が存在するか
- 一般ユーザーと特定アドレスで挙動が変わる可能性

### 測定方法（MVPで現実的なもの）

- コントラクトに以下の**典型パターン**が存在するか：
    - blacklist / whitelist / isExcluded / isBot / tradingEnabled
    - maxTxAmount / maxWalletSize
- 特定条件下で transfer が revert し得る構造

### 判定

- ❌ High Risk
    
    → 売却制限・アドレス制御が可能な構造あり
    
- ⚠️ Warning
    
    → 制限用変数はあるが有効性が不明
    
- ✅ OK
    
    → 取引制限系の構造が確認できない
    

> 理由
> 
> 
> 買えても売れない＝詐欺で最も多い即死パターン
> 

---

## ② Owner 権限の強さ

### 何を見るか

- コントラクトの管理者が後から条件を変更できるか

### 測定方法

- owner() 関数の存在
- onlyOwner 修飾子の有無
- owner が以下を変更できそうか：
    - tax / fee
    - trading enable/disable
    - blacklist
    - mint 設定

### 判定

- ❌ High Risk
    
    → owner が取引条件を自由に変更可能
    
- ⚠️ Warning
    
    → owner 存在、権限内容が不明
    
- ✅ OK
    
    → ownership renounced（放棄）確認
    

---

## ③ Mint（供給量操作）可能性

### 何を見るか

- トークン供給を後から増やせるか

### 測定方法

- mint() / _mint() 関数の存在
- owner または特定ロールのみ mint 可能か

### 判定

- ❌ High Risk
    
    → 制限なし mint 可能
    
- ⚠️ Warning
    
    → mint 構造ありだが制御が限定的
    
- ✅ OK
    
    → mint 不可 or 初期固定供給
    

---

## ④ 流動性（LP）まわりの危険サイン

### 何を見るか

- 流動性が突然抜かれる設計か

### 測定方法（MVPでは「兆候」まで）

- LP アドレスが確認できるか
- LP が burn / lock されている痕跡があるか（確認不能なら Unknown）
- LP が極端に小さい or 単一アドレス管理

### 判定

- ❌ High Risk
    
    → 明確に LP 抜き取り可能な構造
    
- ⚠️ Warning
    
    → LP 状態が確認できない
    
- ✅ OK
    
    → burn / lock 証跡が確認可能
    

---

## ⑤ ホルダー集中度

### 何を見るか

- 価格操作・dump が容易な構造か

### 測定方法

- Top 1 / Top 5 / Top 10 holder 比率
- コントラクト / burn / LP を除外した再計算（可能な範囲で）

### 目安（MVP用の単純基準）

- Top5 > 60% → Warning
- Top3 > 50% → High Risk
- Top1 > 40% → High Risk

---

## ⑥ 税率（Buy / Sell Tax）の異常

### 何を見るか

- 実質的に資金を抜くための高税率

### 測定方法

- tax / fee 変数の存在
- sell tax が buy tax より極端に高いか

### 判定

- ❌ High Risk
    
    → 売却税が極端に高い（例：20〜30%以上）
    
- ⚠️ Warning
    
    → 税率が変更可能
    
- ✅ OK
    
    → 税率なし or 低率固定
    

---

## ⑦ コントラクト検証状況（補助）

### 何を見るか

- 透明性があるか

### 測定方法

- Explorer 上で verified contract か

### 判定

- ⚠️ Warning
    
    → 未検証
    
- ✅ OK
    
    → 検証済み
    

※ **単独では High にしない**

---

## 総合判定ロジック（単純・明示）

### High Risk

- 以下の **いずれか1つ**：
    - 売却制限系 ❌
    - 無制限 mint ❌
    - Owner が取引条件変更可能 ❌
    - ホルダー集中が極端 ❌

### Medium Risk

- ❌ が1つもないが
- ⚠️ が複数存在

### Low Risk

- ❌ なし
- ⚠️ が少数のみ

※ **Unknown は Warning 扱い**

---

## なぜこの項目構成が妥当か

- すべて **既存詐欺トークンで実証されているパターン**
- 数値精度に依存しない
- Codexで **if / else ベース**で安全に実装可能
- ロジックが壊れても「説明ツール」として成立

---

## 重要な割り切り（明示する）

- 判定は「傾向」であり「断定」ではない
- false positive / false negative は必ず出る
- **“危険サインが多いか少ないか”を見る道具**

---

### 次にやるべきこと（自然な流れ）

- **A：MVPで採用する項目を7〜8個に確定**
- **B：各項目の Warning / High 条件を固定**
- **C：Codex用タスク文（触っていい範囲を明文化）**

次はどれを詰める？

---GPT---

「どうやって判定するか書いてもらったけど俺バカだから知識ないんだよね。わかるように説明して。あとそれって妥当なの？」
の回答です

---GPT---

了解。

ここでは **「なぜその項目を見るのか」「それがなぜ妥当なのか」** を、

**完全初心者にも通じる要約 → 技術的に少し踏み込んだ説明 → 妥当性の理由**

という三層構造で整理する。

この文章自体が **そのままツール内のヘルプ／Explainセクションに転用できる** レベルで書く。

---

# Token Scam Inspector

## 判定項目・測定方法の詳細説明（理由付き）

---

## ① 取引制限・ハニーポット兆候

### 🔰 超ざっくり要約（初心者向け）

> **「買えるけど売れない仕組みが入っていないか」**を見ています。
> 

---

### 何を測定しているか

トークンのスマートコントラクトに、

**特定の条件で送金（特に売却）を止められる仕組み**が存在するかを確認する。

具体的には：

- ブラックリスト機能（特定アドレスを弾ける）
- 取引ON/OFFフラグ
- 最大取引量・最大保有量制限
- 一部アドレスだけ特別扱いする仕組み

---

### なぜこれが危険なのか

詐欺トークンで最も多いのが、

- **誰でも買える**
- **一般ユーザーだけ売れない**
- **開発者や特定アドレスだけ売れる**

という構造（＝ハニーポット）。

これはコード上で **売却時に失敗させる条件分岐**を入れるだけで実現できるため、

非常に頻繁に使われる。

---

### なぜ妥当な判定項目か

- 実際の詐欺トークンで **最頻出**
- 数値ではなく **構造の有無**を見ているため安定
- 「売れない」は投資判断として **即致命的**

👉 **1つでも見つかれば High Risk 扱いが妥当**

---

## ② Owner（管理者）権限の強さ

### 🔰 超ざっくり要約

> **「開発者が後から好き放題できるか」**を見ています。
> 

---

### 何を測定しているか

トークンの管理者（Owner）が、

- 税率を変更できるか
- 取引を止められるか
- ブラックリストを操作できるか
- mint（新規発行）できるか

といった **危険な操作を後から実行可能か**を確認する。

---

### なぜこれが危険なのか

仮に今は問題がなくても、

- ある日突然税率を100%にする
- 売却を禁止する
- 自分だけ売って逃げる

といった **後出し詐欺**が可能になる。

---

### なぜ妥当な判定項目か

- ラグプル系詐欺の **根本原因**
- ownership renounced（権限放棄）されていない限り常に残るリスク
- 初心者には最も見落とされやすいポイント

👉 **強すぎる owner 権限＝構造的リスク**

---

## ③ Mint（供給量操作）可能性

### 🔰 超ざっくり要約

> **「あとからコインを無限に増やせないか」**を見ています。
> 

---

### 何を測定しているか

- mint / _mint 関数が存在するか
- 誰が mint を実行できるか
- 上限なしで供給を増やせるか

---

### なぜこれが危険なのか

開発者があとから大量にトークンを発行し、

- 自分に配布
- 市場で売却
- 価格を暴落させる

という **インフレ型詐欺**が可能になる。

---

### なぜ妥当な判定項目か

- 詐欺トークンの典型パターン
- 正当プロジェクトでも mint は使うが、**初心者は区別できない**
- 無制限 mint は **原理的に危険**

👉 **無制限 mint は High Risk 扱いが妥当**

---

## ④ 流動性（LP）まわりの危険サイン

### 🔰 超ざっくり要約

> **「お金の入ったプールを急に抜けないか」**を見ています。
> 

---

### 何を測定しているか

- 流動性（LP）が存在するか
- LP が burn / lock されているか
- LP を開発者が自由に引き出せる構造か

---

### なぜこれが危険なのか

流動性が抜かれると、

- 売りたくても買い手がいない
- 価格が即ゼロに近づく

＝ **即死ラグプル**

---

### なぜ妥当な判定項目か

- ラグプルの直接原因
- LP ロック有無は最低限の安全指標
- 「確認できない」＝安全ではない

👉 **未確認は Warning 扱いが妥当**

---

## ⑤ ホルダー集中度

### 🔰 超ざっくり要約

> **「少人数がほとんど持っていないか」**を見ています。
> 

---

### 何を測定しているか

- 上位ホルダーが全体の何%を保有しているか
- 特定アドレスに集中していないか

---

### なぜこれが危険なのか

少人数が大量保有している場合、

- まとめ売りで価格崩壊
- 操作・談合が可能

---

### なぜ妥当な判定項目か

- 数値で見えるため分かりやすい
- 完全分散は理想だが、**極端な集中は危険**
- 多くの詐欺トークンで共通

---

## ⑥ 税率（Buy / Sell Tax）の異常

### 🔰 超ざっくり要約

> **「売るときに異常にお金を取られないか」**を見ています。
> 

---

### 何を測定しているか

- 売買時の手数料率
- 売却税が異常に高くないか
- 税率を後から変更できるか

---

### なぜこれが危険なのか

- 売却時に30%〜50%取られる
- 実質的に売れないのと同じ

---

### なぜ妥当な判定項目か

- ハニーポットの亜種
- 初心者は「税率」を軽視しがち
- 数値で明確に危険度を示せる

---

## ⑦ コントラクト検証状況（補助項目）

### 🔰 超ざっくり要約

> **「中身が見えるコードか」**を見ています。
> 

---

### 何を測定しているか

- ブロックエクスプローラ上でコードが公開・検証されているか

---

### なぜこれが危険なのか

- 未検証＝何をしているか分からない
- 意図的に隠している可能性がある

---

### なぜ妥当な判定項目か

- 単独では致命的ではない
- しかし **他リスクと組み合わさると危険度が跳ね上がる**

👉 **Warning 専用項目が妥当**

---

## 全体としての妥当性まとめ

- すべて **実在の詐欺トークンで頻出**
- 数値精度に依存しない
- Codexで安全に自動実装可能
- 初心者に説明可能
- 誤判定があっても致命傷にならない

---

## この設計の立ち位置（重要）

- ❌ 詐欺を断定しない
- ⭕ 危険な匂いを可視化する
- ⭕ 判断材料を人間に返す

---

### 次の自然なステップ

ここまで来たら次は：

- **A：MVPで採用する項目を最終7〜8個に固定**
- **B：各項目の Warning / High の閾値を数値で確定**
- **C：この説明を UI 内にどう分割して出すか設計**

どれから詰める？

---GPT---


内容は分かった。このツールは開発から公開およびその後の運営を無料で行いたいが可能か。可能であるならばどういった構成でツールを作成すればいいかを書いてほしい。複数候補がある場合、どちらを薦めるかも書いてほしい



---GPT---

可能。**無料で開発→公開→（ほぼ）放置運営**は現実的にできる。

ただし「どこからデータを取るか」によって、**無料で耐えられる範囲**が変わる。ここが設計の肝。

以下に **無料運営できる構成を3候補**出して、最後に **おすすめ**をはっきり言う。

---

## 無料運営の前提条件（現実ライン）

- 参照先APIの無料枠に収まるようにする（例：Etherscan Freeは 3 calls/sec・1日最大100,000コール） ([Etherscan](https://docs.etherscan.io/resources/rate-limits?utm_source=chatgpt.com))
- BscScanも無料で使えるが、IPあたり最大 5 calls/sec などのレート制限がある ([Bscscan Information Center](https://info.bscscan.com/api-return-errors/?utm_source=chatgpt.com))
- 「同じトークンを何度も調べる」アクセスは **キャッシュ**で潰す（これをやらないと無料枠が死ぬ）
- サーバーを常時稼働させない（＝静的サイト＋必要最小限のサーバレス）

---

# 構成案A：完全静的（フロントだけでAPI直叩き）

### 何を使う

- Cloudflare Pages / GitHub Pages：静的ホスティング（無料）
- ブラウザから Etherscan/BscScan API を直接呼ぶ

### 長所

- 最速で作れる（MVP向き）
- インフラゼロ、運営が楽

### 短所（致命点になりがち）

- **APIキーをフロントに置く＝公開される**
    
    → “悪用”されるとレート制限を食い潰されてツールが死ぬ
    
- CORSやレート制限回避が面倒
- 「無料運営で放置」には不向き

### こんな場合だけアリ

- **APIキー不要**の取得経路だけで成立する（かなり制限される）
- もしくは「キー漏洩してもOK」な割り切りができる

**おすすめ度：低（放置運営に弱い）**

---

# 構成案B：静的＋“薄い”サーバレス（APIプロキシ＋キャッシュ）

**無料運営で一番現実的。おすすめ。**

### 何を使う

- Cloudflare Pages（UIのホスティング：無料）
- Cloudflare Workers（APIプロキシ：無料枠あり）
    - Free plan：**1日100,000 requests** ([Cloudflare Docs](https://developers.cloudflare.com/workers/platform/limits/?utm_source=chatgpt.com))
- Workers内で Etherscan/BscScan を呼び、結果をキャッシュして返す

### この構成のポイント

- ブラウザ → Workers → 外部API の順にすることで
    
    **APIキーはWorkers側の環境変数に隠せる**
    
- Workersで **キャッシュ（KV不要でも可）**すれば
    
    同じトークンの問い合わせが連打されても外部APIを叩かない
    

### 具体的なデータ設計（例）

- エンドポイント：`/api/inspect?chain=eth&address=0x...`
- レスポンス：JSON（チェック項目＋判定＋説明）
- キャッシュキー：
    - `inspect:eth:0xabc...`
- TTL：
    - 15分〜24時間（「コードやホルダー」は頻繁に変わらないので長めでも良い）

### 長所

- **無料で回る可能性が一番高い**
- キー秘匿・レート制限・キャッシュが一括で解決
- 放置運営向き

### 短所

- 構成Aよりは少しだけ面倒（ただし一度作れば終わり）

**おすすめ度：最高（無料運営の本命）**

---

# 構成案C：静的＋第三者の統合API（Moralis / Covalent 等の無料枠）

### 何を使う

- UIは静的
- データは「全部入りAPI」に寄せる（ホルダー、メタデータなど）

### 長所

- 実装がラクになりやすい（APIが統一されている）

### 短所

- 無料枠が将来変わる/急に厳しくなるリスク
- “放置運営”中に仕様変更が起きると詰む

**おすすめ度：中（短期MVPは良いが、放置に弱い）**

---

## じゃあどれを薦める？

**B（Cloudflare Pages + Workers の薄いAPIプロキシ＋キャッシュ）一択**。

「無料」「放置」「外部API依存」を同時に満たすには、これが一番事故らない。

- Workers Freeのリクエスト上限（1日100,000）は明示されている ([Cloudflare Docs](https://developers.cloudflare.com/workers/platform/limits/?utm_source=chatgpt.com))
- 外部API（Etherscan/BscScan）も無料枠・レート制限があるので、**キャッシュで守る**のが前提 ([Etherscan](https://docs.etherscan.io/resources/rate-limits?utm_source=chatgpt.com))

---

# 無料運営向け：おすすめ構成（B）の完成形

### フロント（Pages）

- 住所入力 → `/api/inspect` を叩く
- 返ってきたJSONをUI表示（Risk badge + table + Explain）

### バック（Workers）

- 入力検証（chain / address）
- キャッシュチェック（ヒットしたら即返す）
- ミスなら外部APIへ
- レスポンスを整形してキャッシュして返す

### さらに放置性能を上げる小技

- 1 IPあたりの簡易レート制限（悪用対策）
- 「結果画面のURL共有」を可能にする（同じアドレスならキャッシュで安い）

---

## 次にやるとしたら

この構成でいく前提で、俺が次に出せるのはどっちも一発で進められる：

1. **MVPで使うチェック項目を“7〜8個に確定”して、データ取得先（Etherscan/BscScan）にマッピング**
2. **Codex向けタスク文**（Pages + Workers の最小構成、キャッシュTTL、環境変数名、APIルート固定）

どっちから作る？

---GPT---

「構成案B：静的＋“薄い”サーバレス（APIプロキシ＋キャッシュ）」でいこう。このあたりでツールの仕様書と開発ロードマップを作成したいと思うがどちらから先に作成するのがいいか

仕様書の作成

ツールが成り立つかテスト

agent.mdなどの作成

ロードマップ

タスクスケジュール

各タスク
