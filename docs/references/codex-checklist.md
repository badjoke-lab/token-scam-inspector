# Codex Checklist (Reference)

- Purpose: Codex開発を回すための準備・運用チェックリスト（参照用）
- Status: **Reference (NOT a spec)**
- Source of truth (Specs): `docs/specs/`
- Related (Ops):
  - `AGENTS.md`
  - `codex/README.md`
  - `codex/tasks/task-00-rules.md`
- Last updated: 2025-12-27

---

## 1) Codex開発に必要なもの（作業・設定・前提）

- **GitHubリポジトリがあること**
  - PR → レビュー → マージ のループを回す土台。

- **Codexが守るルールが1か所に固定されていること**
  - 勝手な機能追加、スコア化、断定表現などの暴走を防ぐ。

- **タスク管理の置き場（タスク文の保管場所）があること**
  - どの順序で何をしたかが残り、再現性が上がる。

- **ローカル実行の最小要件（Cloudflare系）**
  - Workers動作確認のために `wrangler` は最終的に必要（ただし接続/環境寄り）。

- **デプロイ先の前提（Cloudflare Pages / Workers）**
  - Pages: 静的 `app/` を配信
  - Workers: API を `workers/` で運用
  - Phase 1 は DB なし、キャッシュは Cache API（TTL 24h）

---

## 2) Codex運用で “必須級” のファイル（最小セット）

> ここは “実装コード” ではなく、Codex運用の枠（暴走防止）を作るためのもの。

### A. `AGENTS.md`（最重要）
- **目的**：Codexの行動規範（禁止事項・やる順番・書き方）を固定
- **中身の例**
  - Phase 1 の絶対条件（スコア化禁止、断定禁止、勝手な追加禁止）
  - 実装順（ディレクトリ → Workers雛形 → ダミー → キャッシュ → UI…）
  - 変更していい範囲／触ってはいけない範囲（`docs/specs/` は参照のみ等）
- **効果**：毎回同じ注意を書く手間が減り、暴走率が下がる

### B. `codex/README.md`
- **目的**：Codex運用ルールの入口（運用方法の固定）
- **中身の例**
  - タスクの置き場（`codex/tasks/`）
  - タスク→PR→レビュー→マージ→次タスク の流れ
  - タスク命名規則（例：`task-01-setup-structure.md`）

### C. `codex/tasks/task-00-rules.md`
- **目的**：タスクに毎回貼る共通前提を1枚にまとめる
- **中身の例**
  - 断定・助言禁止、Unknownは失敗ではない、など思想面
  - “仕様書にない機能追加禁止” を明文化
- **効果**：各タスクが短く書ける（task-00参照でOK）

### D. `codex/tasks/task-XX-*.md`（実タスク）
- **目的**：各ステップの指示書を蓄積
- **中身の例**
  - 1タスク＝1PR、完了条件（チェックリスト）まで書く
- **効果**：後から「どこで壊れたか」を追える

---

## 3) “あると強い” ファイル（必要になったら追加）

### E. `CONTRIBUTING.md`（レビューが重くなったら）
**置くべきサイン**
- PRレビューで同じ指摘（表現NG、Phase逸脱）が2回以上出た
- Codexが毎回「どこまでやっていい？」で迷う
- PRテンプレやチェック項目が欲しくなった  
→ **一言**：レビューがループし始めたら

### F. `.editorconfig`（diffが汚れ始めたら）
**置くべきサイン**
- 整形差分が増えてレビューしづらい
- 改行やインデントがブレる  
→ **一言**：PRのdiffが読みにくくなったら

### G. `wrangler.toml`（Workersを触る段階で必要）
**置くタイミング**
- Task 02（Workers雛形）に入る直前〜タスク内で追加  
→ **一言**：Workersが出た瞬間

---

## 4) まとめ（判断ルール）
- 最初から全部揃えなくていい（最小4で開始）
- 痛み（レビュー反復 / diff汚れ / Workers開始）が出たら追加する
