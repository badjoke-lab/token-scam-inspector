---
layout: log
title: "2025-12-25"
date: 2025-12-25
---

「どう作るか」の続きです。  
まずツールの全体構想を作ってもらいました。

- [Dev Log Indexへ戻る]({{ "/dev-log/" | relative_url }})

---

## 🤖 GPT（全体構想メモ）

<details markdown="1">
<summary>以下 全体構想メモ（クリックで展開）</summary>

### Token Scam Inspector — Future Vision & Phased Plan（全体構想メモ）

#### 0. このプロジェクトの立ち位置

Token Scam Inspector は、トークンの「詐欺断定」ではなく、**詐欺で頻出する危険サインを説明可能な形で提示する一次スクリーニング**である。  
精度競争（最強スコア）を避け、**軽量・無料運営・放置可能**を最優先に設計する。

- **Goal**: 壊れにくい / 分かりやすい / 速い / 無料で置ける  
- **Not a goal**: 詐欺の断定、投資助言、100%精度

#### 1. 主要ユーザー像

- **初心者**：X/Telegramのコントラクトを貼って、危険サインの意味を理解したい  
- **中級者**：買う前に最低限の確認（売却制限・権限・供給操作・集中度）を高速に済ませたい  
- **リサーチ用途**：怪しいトークンを人に説明するための「根拠の箇条書き」が欲しい  

#### 2. プロダクト戦略（競合が強い前提での勝ち筋）

競合は多い。よって差別化は **「判定」ではなく「説明（Explainable）」** に置く。

**差別化の柱**
1. **Explainable**（なぜ危険かを言語化）  
2. **Lightweight**（30秒以内、UIも軽い）  
3. **Purpose-limited**（買う前の最小チェックに特化）  
4. **Shareable**（結果URLで共有できる設計＝拡散とキャッシュの両得）  

#### 3. 技術戦略（無料→有料へ自然に進化できる形）

基本構成は **Cloudflare Pages（静的UI） + Workers（薄いAPI + キャッシュ）** を中核にする。

**無料運営フェーズの原則**
- 外部APIコールは最小化（キャッシュ最優先）  
- Unknown（取得できない）は安全扱いしない（Warn/Unknownとして表示）  
- “壊れにくさ”を優先して、複雑な推論や高頻度データ依存は避ける  

**将来の有料化フェーズの原則**
- 有料API（より深いデータ）を「追加モジュール」として差し替え可能にする  
  → MVPのAPIレスポンス形（JSONスキーマ）を崩さず拡張フィールドを足す

#### 4. フェーズ設計（MVPで終わらない前提の段階）

以下は **“目指す順序”**。各フェーズは単独で公開可能な完成度にする。

**Phase 1（MVP / 無料で成立する最小）**
- 目的：入力→判定→理由説明→共有が成立する  
- 中身：対応チェーン少数（例：ETH + BSC）、判定項目7〜8個、Workers APIは `inspect` のみ、キャッシュTTLで外部API依存を抑える、免責・説明を丁寧に  
- 成功条件：  
  - “使って理解できる”  
  - “無料枠で落ちない”  
  - “同じアドレスの再アクセスが軽い（キャッシュ）”  

**Phase 2（無料拡張：使われる機能を増やす）**
- 目的：継続利用・検索流入・共有の動線を強化  
- 中身：対応チェーン追加、ルール辞書拡張、共有ページ安定化、stale-while-revalidate的運用、“危険サイン辞書ページ”（SEO/教育）  
- 成功条件：  
  - “検索で拾われる”  
  - “説明ページが引用される”  
  - “外部API障害でも完全停止しない”  

**Phase 3（有料化の準備：より深い解析へ）**
- 目的：将来、予算が付いたら「精度と深さ」を増やせる構造にする  
- 中身：provider層の差し替え可能アーキテクチャ、拡張フィールド追加前提のレスポンス設計、高コスト機能のオプション化  
- 成功条件：MVPを壊さず“深い解析”を追加できる  

**Phase 4（有料API前提の進化：プロ版の核）**
- 候補：ウォッチ（監視・通知）、リスク変化履歴、高精度ホルダー分析など

#### 5. “やらないこと”リスト（破綻防止）

Phase 1〜2ではやらない（破綻ポイントだから）。
- “詐欺断定”の断言（法務・炎上・責任が増える）  
- 「全チェーン対応」を最初から目標にする  
- 高頻度リアルタイム追跡（無料枠が死ぬ）  
- 巨大DB前提の分析（費用が発生する）  
- 完全ブラックボックススコア（説明不能）  

#### 6. 収益化の位置づけ（無料前提）

当面は **無料運営でOK**。将来の有料化は “任意” として設計で備える。

無料での現実解：
- 寄付（任意）  
- 広告（やるなら後で）  
- 他ツールへの導線（ハブ化）  

#### 7. 次に作る文書（この後の順番）

この構想メモを前提に、次は以下を**確定文書**として作る。

1. **MVP仕様書（確定）**  
   - Phase 1の範囲だけを固定  
   - API/キャッシュ/判定項目/免責/画面遷移を明文化  
2. **開発ロードマップ**  
   - 仕様書をタスク分解して、Codexに投げられる粒度にする  

</details>

---

次に仕様書を作らせました。  
改訂版となっているのは、最初に出してきたものにダメ出しをしたためです。

## 🤖 GPT（Phase1 仕様書）

<details markdown="1">
<summary>以下 TSI Phase1 仕様書（クリックで展開）</summary>

### Token Scam Inspector — MVP仕様書（Phase 1 / 確定・改訂版 v1.1）

#### 1. 目的とスコープ（Phase 1）

**目的**
- トークン購入前に **明確に危険なサインがないか** を短時間で確認できる  
- 判定理由を **初心者でも理解できる言葉** で提示する  
- 判定結果の **妥当性・根拠がUIから読み取れる** ことを重視する  
- 無料運営で **壊れにくい構成** を成立させる  

**スコープ外（Phase 1ではやらない）**
- 詐欺の断定  
- 投資助言  
- 高頻度リアルタイム監視  
- ブラックボックススコア（数値評価）  
- 全チェーン対応  

#### 2. 対応チェーン（固定）

Phase 1 では以下 **2チェーンのみ**：
- **Ethereum（ERC-20）**
- **BNB Smart Chain（BEP-20）**

※ チェーン追加は Phase 2 以降  
※ API・UI・判定ロジックはチェーン非依存で拡張可能な設計

#### 3. システム構成（確定）

```

[ Browser ]
|
|  GET /api/inspect
v
[ Cloudflare Workers ]
|
|  (cache hit → return)
|  (cache miss → external API)
v
[ External APIs (Free tier) ]

```

- UI：Cloudflare Pages（静的 HTML / CSS / JS）
- API：Cloudflare Workers
- キャッシュ：Workers Cache API
- DB：なし（Phase 1）

#### 4. API仕様（Phase 1 固定）

**エンドポイント**
```

GET /api/inspect

````

**クエリ**
| name    | type   | required | note           |
| ------- | ------ | -------- | -------------- |
| chain   | string | yes      | `eth` or `bsc` |
| address | string | yes      | トークンコントラクト |

**バリデーション**
- address：`0x` で始まる 40 hex  
- chain：許可リスト（eth / bsc）

#### 5. キャッシュ設計（確定）

- キー：`inspect:{chain}:{address}`
- TTL：**24時間（固定）**
- 戦略：
  - hit → 即返却  
  - miss → 外部API取得 → 判定 → キャッシュ → 返却  
  - 外部API失敗：
    - キャッシュあり → stale返却  
    - キャッシュなし → エラーJSON

#### 6. レスポンスJSON（固定スキーマ）

```json
{
  "chain": "eth",
  "address": "0x...",
  "overallRisk": "low | medium | high | unknown",
  "summary": "Human-readable one-line verdict",
  "topReasons": [
    "Potential sell restriction detected",
    "Owner can modify trading rules"
  ],
  "checks": [
    {
      "id": "sell_restriction",
      "label": "Sell Restriction / Honeypot",
      "result": "ok | warn | high | unknown",
      "short": "You may not be able to sell this token.",
      "detail": "Some scam tokens allow buying but block selling for regular users.",
      "evidence": [
        "Sell tax appears extremely high"
      ],
      "howToVerify": [
        "Check swap behavior using a tiny amount on a trusted tool."
      ]
    }
  ],
  "meta": {
    "cached": true,
    "generatedAt": "ISO-8601"
  }
}
````

※ Phase 2 以降は **フィールド追加のみ許可**（breaking change禁止）

#### 7. 判定項目（Phase 1：7項目）

各項目は **Result + Short + Why + Evidence + How to verify** を必ず表示する。

1. Sell Restriction / Honeypot
2. Owner Privileges
3. Mint Capability
4. Liquidity Lock Status
5. Holder Concentration
6. Contract Verification
7. Trading Enable Control

#### 8. Overall Risk 表示ルール

* high が1つ以上 → high
* warn が2つ以上 → medium
* warn が1つ → medium
* 全て ok → low
* unknown 多数 → unknown

**Overallは必ず以下3点セット**

1. Risk Level バッジ（Low / Medium / High / Unknown）
2. One-line Verdict（summary）
3. Top Reasons（最大3件）

※ Phase 1 は数値スコアを表示しない

#### 9. UI仕様（MVP）

* トップ：チェーン選択 / コントラクト入力 / Inspect
* 結果：Overall / サマリー / Top Reasons / 判定項目サマリー
* 詳細：What we checked / Why it matters / Evidence / How to double-check
* 免責・説明：投資助言ではない / 判定保証なし / Unknownの意味

#### 10. 非機能要件

* 1リクエスト 5秒以内
* API障害時もUIは落とさない
* キャッシュ優先で無料枠を保護
* ログ最小（Workers console）

#### 11. 免責（固定文）

> This tool does not provide investment advice.
> Results are based on automated checks and may be incomplete or incorrect.
> Always do your own research (DYOR).

#### 12. Phase 1 完了条件（公開基準）

* `/api/inspect` が安定動作
* キャッシュが有効
* Overall と各判定項目の **理由がUIから理解できる**
* 無料枠で継続稼働可能

</details>

---

次にツール作成のロードマップです。
内容の前に用語がどうとかごちゃごちゃあるのは、最初出してきたやつの使い方がめちゃくちゃでダメ出しをしたからです。

## 🤖 GPT（ロードマップ）

<details markdown="1">
<summary>以下 TSI Phase1 ロードマップ（クリックで展開）</summary>

### Token Scam Inspector — 開発ロードマップ（Stage制 / Product Phase分離版）

#### 用語定義（固定）

**Product Phase（プロダクト段階）**

* Product Phase 1：MVP（無料・最小）
* Product Phase 2：無料拡張（利用者増・精度向上）
* Product Phase 3：有料前提の高度化

**Development Stage（開発ステージ）**

* Stage 0〜7：実装の進行手順
* 各Stageは単独で完結・停止可能（破綻防止）

#### Stage 一覧（0–7）

**Stage 0：プロジェクト基盤構築**

* Pages/Workers接続、ディレクトリ構成確定、README最低限
* 完了：Pages仮表示、Workers deploy可

**Stage 1：API骨格実装（ロジックなし）**

* `/api/inspect` 作成、バリデーション、ダミーJSON、エラー形式固定
* 完了：正常/異常入力でJSONが返り、フロントからfetch可能

**Stage 2：キャッシュ層実装（無料運営の要）**

* Cache API、キー固定、TTL24h、stale戦略
* 完了：2回目以降cache hit、障害時も（キャッシュありなら）返せる

**Stage 3：外部API接続（生データ取得）**

* Explorer API接続、検証状態・Owner・ホルダー分布など
* 完了：Workers内で生データ取得、失敗時に止まらない

**Stage 4：判定ロジック実装（7項目）**

* 1項目1関数、evidence/howToVerify生成、overall算出
* 完了：全項目が `ok/warn/high/unknown` を返す

**Stage 5：UI実装（理解重視）**

* 入力→Overall（3点）→チェック一覧→details展開→エラー表示
* 完了：初心者が理由を追える

**Stage 6：安全策・免責・仕上げ**

* 簡易レート制限、免責固定、ログ最小化、文言調整
* 完了：abuseで即死しない・誤解を生まない

**Stage 7：Product Phase 1 公開（MVP）**

* 本番デプロイ、最終動作確認、README更新
* 完了：公開URLで安定動作、キャッシュ前提で稼働

#### Codex投入単位（最重要）

* Stage 1 + 2（API骨格＋キャッシュ）
* Stage 3（外部API）
* Stage 4（判定ロジック）
* Stage 5（UI）

</details>

---

次はUIの仕様書です。
デザインのアイディアは全くないので、スケルトンでまずやる方針です。

## 🤖 GPT（UI仕様書：Skeleton）

<details markdown="1">
<summary>以下 UI仕様書（クリックで展開）</summary>

### Token Scam Inspector — UI仕様書（Phase 1 / Skeleton UI）

#### 1. UI設計方針（最重要）

* 装飾しない
* 判断させるUIではなく、理解させるUI
* すべて縦積み（1カラム）
* 区切りは余白のみ（ボーダー最小）
* 色は補助として最小限

#### 2. レイアウト構成

```
[ Header ]
[ Input Area ]
[ Status / Error ]
[ Result: Overall ]
[ Result: Checks List ]
[ Result: Check Details ]
[ Footer / Disclaimer ]
```

* 1ページ完結
* スクロール前提
* PC/Mobile共通（レスポンシブ切替なし）

#### 3. ヘッダー

* サービス名 + サブテキスト
* 小リンク：Dev Log / Methodology
* 固定ヘッダーにしない

#### 4. 入力

1. チェーン選択（select）
2. コントラクト入力（text）
3. Inspectボタン

* 常に縦積み
* 入力エラーは欄直下に文章で表示

#### 5. ステータス

* 実行中：テキストのみ（ローディング不要）
* エラー：無効入力 / API失敗 / キャッシュ返却など文章で区別

#### 6. Overall

* `Overall Risk: High/Medium/Low/Unknown`
* summary（1文）
* Top reasons（最大3）

※数値化しない、色だけに依存しない

#### 7. チェック一覧

* テーブル禁止（リストで）
* 1項目＝1ブロック

  * Label
  * Result
  * Short（1行）

#### 8. 詳細

* `<details>` で折りたたみ（初期は閉）
* 展開内容：What/Why/Evidence/HowToVerify

#### 9. フッター免責

* 投資助言ではない
* 判定保証なし
* DYOR

#### 10. スマホルール

* 1カラム固定
* 横スクロール禁止
* 最小フォント14px
* タップ領域十分
* hover前提禁止

</details>

---

ディレクトリ構造も出させました。
今回はツール作成のログを置きたいので配置案を出してもらいました。

## 🤖 GPT（ディレクトリ構造案）

<details markdown="1">
<summary>以下 TSI Phase1 ディレクトリ構造（クリックで展開）</summary>

### 最終ディレクトリ構造（役割コメント付き）

```
token-scam-inspector/
  app/                      # Tool UI (Cloudflare Pages). 静的フロント（本体）
  workers/                  # API (Cloudflare Workers). /api/inspect などを提供
  docs/                     # Dev Log / Specs site (GitHub Pages)
    index.md
    dev-log/
      index.md
      _template.md
    specs/
      index.md
      spec-phase1-ja.md
      roadmap-phase1-ja.md
      methodology.md
    assets/
      img/
  codex/
    README.md
    tasks/
      000-template.md
    context/
      spec-phase1.md
      roadmap.md
      repo-map.md
  AGENTS.md
  scripts/
  README.md
  LICENSE
```

</details>

---

ここで作成した5点は以下に配置しています。

* 全体構想：`docs/specs/future_vision_phased_plan-ja.md`
* ロードマップ：`docs/specs/roadmap-phase1-ja.md`
* 仕様書：`docs/specs/spec-phase1-ja.md`
* UI仕様書：`docs/specs/ui-spec-ja.md`
* ディレクトリ構造：`docs/specs/directory-tree-phase1-ja.md`

